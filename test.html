<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drag and Drop Images in Table</title>
</head>
<body>
  <h1>Drag and Drop Images in Table</h1>
  <table>
    <tr>
      <td id="cell1"><img src="https://via.placeholder.com/100" draggable="true" id="img1" alt="Image 1"></td>
      <td id="cell2"></td>
      <td id="cell3"><img src="https://via.placeholder.com/100" draggable="true" id="img2" alt="Image 2"></td>
    </tr>
    <tr>
      <td id="cell4"></td>
      <td id="cell5"><img src="https://via.placeholder.com/100" draggable="true" id="img3" alt="Image 3"></td>
      <td id="cell6"></td>
    </tr>
  </table>

  <script>
    const imgs = document.querySelectorAll('img');
    const cells = document.querySelectorAll('td');

    let draggedImg = null;

    imgs.forEach(img => {
      img.addEventListener('dragstart', function (e) {
        draggedImg = img;
        e.dataTransfer.setData('text', img.id);  // Store the ID of the dragged image
      });

      img.addEventListener('dragend', function (e) {
        draggedImg = null;
      });
    });

    cells.forEach(cell => {
      cell.addEventListener('dragover', function (e) {
        e.preventDefault();
      });

      cell.addEventListener('drop', function (e) {
        e.preventDefault();

        const draggedData = e.dataTransfer.getData('text');  // Get the ID of the dragged image
        const droppedImg = document.getElementById(draggedData);  // Get the actual element

        // Check if the target cell already contains an image
        const existingImg = this.querySelector('img');
        if (existingImg) {
          console.log(`Existing Image ID: ${existingImg.id}`);
          
          // Optionally, move the existing image to an empty cell (or handle it differently)
          const emptyCell = [...cells].find(cell => cell.innerHTML.trim() === '');
          if (emptyCell) {
            emptyCell.appendChild(existingImg);  // Move the existing image to the first empty cell
          }
        }

        // Append the newly dragged image to the target cell
        this.appendChild(droppedImg);

        // Log the dropped image and the target cell
        console.log(`Dropped Image ID: ${draggedData}`);
        console.log(`Target Cell ID: ${this.id}`);
      });
    });
  </script>
</body>
</html>
